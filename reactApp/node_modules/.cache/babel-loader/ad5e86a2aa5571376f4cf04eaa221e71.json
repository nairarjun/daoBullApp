{"ast":null,"code":"var _jsxFileName = \"/home/turbo/devel/MyGame/contracts/eos-hackathon/decentralize-io-ui/src/components/Pages/CreateOrganisation/CreateOrganisation.js\";\nimport * as React from 'react';\nimport './CreateOrganisation.css';\nimport Loading from '../../Loading/Loading';\nimport EOSIOApi from '../../../common/eosio-apiService';\nimport config from '../../../common/config';\nimport { withRouter } from \"react-router-dom\";\nimport WalletList from \"../../WalletList/WalletList\";\nimport * as actions from \"../Redux/Actions/index\";\nimport { connect } from \"react-redux\";\nimport { REACT_APP_EOSIO_CONTRACT_ACCOUNT } from \"../../../common/config\";\nimport CommonTooltip from '../../Tooltip/CommonTooltip';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst lastStep = 6;\nconst defultEditVoteConfiguration = {\n  supportVote: 10,\n  minimalApproval: 10,\n  voteDayDuration: 1,\n  voteHourDuration: 0,\n  voteMinDuration: 0\n};\n\nclass CreateOrganisation extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.createOrganisation = async () => {\n      let {\n        accountName\n      } = this.props;\n      let {\n        selectedOrganisation,\n        editVoteConfiguration,\n        shareHoldersinfo,\n        shareHoldersAccount\n      } = this.state,\n          {\n        voteDayDuration,\n        voteHourDuration,\n        voteMinDuration\n      } = editVoteConfiguration,\n          minutesvote = voteDayDuration * 24 * 60 + voteHourDuration * 60 + voteMinDuration;\n      let data = {\n        creator: accountName,\n        daoname: selectedOrganisation,\n        support: editVoteConfiguration.supportVote,\n        minsupport: editVoteConfiguration.minimalApproval,\n        minutesvote,\n        token: `${shareHoldersinfo.amount} `.concat(shareHoldersinfo.symbol),\n        users: shareHoldersAccount.map(value => value.shareholderAccount),\n        balances: shareHoldersAccount.map(value => value.balance)\n      };\n      this.setState({\n        step: 0,\n        loading: true,\n        isEditClick: false\n      });\n\n      try {\n        let createdaoData = await new EOSIOApi(config.REACT_APP_EOSIO_CONTRACT_ACCOUNT, this.props.activeUser).transaction(accountName, 'createdao', { ...data\n        });\n\n        if (createdaoData.isError) {\n          this.setState({\n            loading: false,\n            step: 6\n          });\n        } else {\n          let creators = await this.state.eosio.getTableScope('daotokens123', 'accounts', 'bigpicturesw');\n          let totalData = 0;\n\n          if (creators.rows && creators.rows.length > 0) {\n            for (var i = 0; i < creators.rows.length; i++) totalData += creators.rows[i].count;\n\n            await this.props.setCreatorsList(creators.rows);\n          }\n\n          let daoList = await this.state.eosio.getTableRows(config.REACT_APP_EOSIO_CONTRACT_ACCOUNT, 'bigpicturesw', 'dao', 0, totalData, totalData);\n          let newSelectedDAO = [];\n          await this.props.setOrganisationList(daoList.data.rows);\n\n          if (daoList.data && daoList.data.rows && daoList.data.rows.length > 0) {\n            newSelectedDAO = daoList.data.rows.filter(obj => obj.data.daoname === selectedOrganisation);\n          }\n\n          if (newSelectedDAO.length > 0) this.props.history.push(`/organisation/Shareholeders/${newSelectedDAO[0].data.id}`);else this.props.history.push('/');\n        }\n      } catch (err) {\n        alert(err);\n        this.props.history.push('/');\n      }\n    };\n\n    this.setOrganisation = () => {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"organisationHeading\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-heading\",\n          children: \"Creating Organisation\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 13\n      }, this);\n    };\n\n    this.editVotingConfig = (event, key, symbol) => {\n      let editVoteConfiguration = this.state.editVoteConfiguration;\n      editVoteConfiguration[key] = event.target.value === '' ? defultEditVoteConfiguration[key] : Number(event.target.value);\n      this.setState({\n        editVoteConfiguration: editVoteConfiguration\n      });\n    };\n\n    this.selectOrganisation = (event, value) => {\n      this.setState({\n        selectedOrganisation: event.target.value,\n        errMsg: event.target.value !== '' && ''\n      });\n    };\n\n    this.next = stateName => {\n      let {\n        step,\n        selectedOrganisation,\n        errMsg = '',\n        votingConfiguration,\n        supportVoteErrorInput = '',\n        shareHoldersinfo,\n        shareHoldersAccount,\n        isError = false\n      } = this.state;\n      let cloneVotingConfig = [{\n        name: 'Support %',\n        errMsg: '',\n        values: [{\n          value: this.state.editVoteConfiguration.supportVote,\n          abbrevation: '%',\n          name: 'supportVote'\n        }]\n      }, {\n        name: 'Minimal Approval %',\n        errMsg: '',\n        values: [{\n          value: this.state.editVoteConfiguration.minimalApproval,\n          abbrevation: '%',\n          name: 'minimalApproval',\n          errMsg: ''\n        }]\n      }, {\n        name: 'Vote Duration',\n        errMsg: '',\n        values: [{\n          value: this.state.editVoteConfiguration.voteDayDuration,\n          abbrevation: ' Day',\n          name: 'voteDayDuration',\n          errMsg: ''\n        }, {\n          value: this.state.editVoteConfiguration.voteHourDuration,\n          abbrevation: ' Hours',\n          name: 'voteHourDuration',\n          errMsg: ''\n        }, {\n          value: this.state.editVoteConfiguration.voteMinDuration,\n          abbrevation: ' Mins',\n          name: 'voteMinDuration',\n          errMsg: ''\n        }]\n      }];\n\n      if (stateName === 'selectedOrganisation') {\n        if (selectedOrganisation === '' || selectedOrganisation.length < 5) {\n          errMsg = 'Organisation name must be greater than or equal 5 characters.';\n          isError = true;\n        } else if (this.props.daoList.filter(dao => dao.data.daoname.toUpperCase().trim() === selectedOrganisation.toUpperCase().trim()).length > 0) {\n          errMsg = 'Organisation name already exits';\n          isError = true;\n        } else if (selectedOrganisation.match(/^\\d/)) {\n          errMsg = `Organisation name can't start with number`;\n          isError = true;\n        }\n      } else if (stateName === 'votingConfiguration') {\n        if (this.state.editVoteConfiguration.supportVote < this.state.editVoteConfiguration.minimalApproval) {\n          errMsg = 'Support % should be equal or more than minimal qpproval';\n          cloneVotingConfig.filter(obj => obj.name === 'Support %')[0].errMsg = errMsg;\n          isError = true;\n        } else if (this.state.editVoteConfiguration.supportVote > this.state.editVoteConfiguration.minimalApproval) {\n          errMsg = '';\n          cloneVotingConfig.filter(obj => obj.name === 'Support %')[0].errMsg = errMsg;\n        }\n\n        if (this.state.editVoteConfiguration.voteDayDuration === 0 && this.state.editVoteConfiguration.voteHourDuration === 0 && this.state.editVoteConfiguration.voteMinDuration === 0) {\n          errMsg = `Vote duration can't be 0`;\n          cloneVotingConfig.filter(obj => obj.name === 'Vote Duration')[0].errMsg = errMsg;\n          isError = true;\n        } else {\n          errMsg = '';\n          cloneVotingConfig.filter(obj => obj.name === 'Vote Duration')[0].errMsg = errMsg;\n        }\n      } else if (stateName === 'Configure Shareholders') {\n        if (shareHoldersinfo.amount === '') {\n          shareHoldersinfo.amountErrMsg = 'Please add amount';\n          isError = true;\n        } else {\n          shareHoldersinfo.amountErrMsg = '';\n        }\n\n        if (shareHoldersinfo.symbol === '' || shareHoldersinfo.symbol.length > 7 || /^[A-Z]+$/gm.exec(shareHoldersinfo.symbol) === null) {\n          shareHoldersinfo.symbolErrMsg = 'Symbol is an all uppercase string of 7 or less characters from [A-Z] ';\n          isError = true;\n        } else {\n          shareHoldersinfo.symbolErrMsg = '';\n        }\n\n        for (let i = 0; i < shareHoldersAccount.length; i++) {\n          const regex = /[^a-z0-5]/gm;\n          var regex1 = new RegExp('(\\\\d+(?:\\\\.\\\\d+)?\\\\s' + shareHoldersinfo.symbol + ')');\n\n          if (!regex1.exec(shareHoldersAccount[i].balance)) {\n            isError = true;\n            shareHoldersAccount[i].balanceError = `Balance:100 ${shareHoldersinfo.symbol}`;\n          } else {\n            shareHoldersAccount[i].errMsg = '';\n          }\n\n          if (shareHoldersAccount[i].shareholderAccount.length < 12 || regex.exec(shareHoldersAccount[i].shareholderAccount) != null || shareHoldersAccount[i].shareholderAccount.length > 14 || shareHoldersAccount[i].shareholderAccount === '') {\n            isError = true;\n            shareHoldersAccount[i].errMsg = 'Account names must be 12 characters long and only include the characters 12345abcdefghijklmnopqrstuvwxyz';\n          } else {\n            shareHoldersAccount[i].errMsg = '';\n          }\n        }\n      }\n\n      this.setState({\n        step: isError ? step : this.state.isEditClick ? lastStep : step + 1,\n        errMsg: isError ? errMsg : '',\n        supportVoteErrorInput,\n        shareHoldersinfo,\n        shareHoldersAccount,\n        votingConfiguration: cloneVotingConfig\n      });\n    };\n\n    this.addMoreShares = () => {\n      let shareHoldersAccount = this.state.shareHoldersAccount;\n      shareHoldersAccount.push({\n        shareholderAccount: '',\n        balance: '',\n        balanceError: '',\n        errMsg: ''\n      });\n      let shareHolderCount = this.state.shareHolderCount;\n      this.setState({\n        shareHolderCount: shareHolderCount + 1,\n        shareHoldersAccount\n      });\n    };\n\n    this.onShareNameChange = (event, value, contentType, i) => {\n      let shareHoldersinfo = this.state.shareHoldersinfo;\n      shareHoldersinfo[contentType] = event.target.value.trim();\n      this.setState({\n        shareHoldersinfo\n      });\n    };\n\n    this.onShareNameAccountChange = (event, value, contentType, i) => {\n      let shareHoldersAccount = this.state.shareHoldersAccount;\n      shareHoldersAccount[i][contentType] = event.target.value;\n      if (shareHoldersAccount[i].errMsg !== '' && event.target.value !== '') shareHoldersAccount[i].errMsg = '';\n      if (shareHoldersAccount[i].balanceError !== '' && event.target.value !== '') shareHoldersAccount[i].balanceError = '';\n      this.setState({\n        shareHoldersAccount\n      });\n    };\n\n    this.getTooltipText = name => {\n      switch (name) {\n        case \"Support %\":\n          return \"Support Percentage\";\n\n        case \"Minimal Approval %\":\n          return \"Minimal Approval Percentage\";\n\n        case \"Vote Duration\":\n          return \"Voting expiry time\";\n\n        case \"Symbol\":\n          return \"Symbol is an all uppercase string of 7 or less characters from [A-Z]\";\n\n        case \"Amount of Shares\":\n          return \"Total amount of Shares\";\n\n        case \"Symbol\":\n          return \"Symbol is an all uppercase string of 7 or less characters from [A-Z]\";\n\n        default:\n          return \"NA\";\n      }\n    };\n\n    this.renderStepOne = () => {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-heading\",\n          children: \"Connect Wallet\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-description\",\n          children: \"To create an organisation you need to connect your EOS account, please click connect below and follow the instruction to connect.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"organisation-btn organisation-connectbtn\",\n          onClick: () => this.setState({\n            step: 2\n          }),\n          children: \"Connect\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-bottom\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-bottom-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fa fa-lock lock\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 262,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"card-bottom-container-heading\",\n              children: \"Create Wallet (Coming soon) \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 262,\n              columnNumber: 56\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-bottom-container-summary\",\n              children: \"We\\u2019re working on a simplfied sign up experience for none blockchain users, check back soon for an update.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 263,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 16\n      }, this);\n    };\n\n    this.renderStepThree = () => {\n      let {\n        selectedOrganisation,\n        errMsg\n      } = this.state;\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-heading\",\n          children: \"Organisation Name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"Organisations\",\n          children: \"Name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: selectedOrganisation,\n          className: \"organisations-TextBox\",\n          onChange: (event, value) => {\n            this.selectOrganisation(event, value);\n          },\n          placeholder: selectedOrganisation === '' ? 'Select Organisation Name…' : selectedOrganisation\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"errMsg\",\n          children: errMsg\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"organisation-btn next-btn\",\n          onClick: () => this.next('selectedOrganisation'),\n          children: \"Next\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 16\n      }, this);\n    };\n\n    this.renderStepFour = () => {\n      let {\n        votingConfiguration,\n        errMsg\n      } = this.state;\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-heading\",\n          children: \"Configure Voting\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"voting-subInfo\",\n          children: \"Edit at a later date within voting settings.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 13\n        }, this), votingConfiguration.map((config, i) => {\n          return /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"voting-txt\",\n              children: [config.name, \" \", /*#__PURE__*/_jsxDEV(\"i\", {\n                \"data-tip\": true,\n                \"data-for\": `CO_config_${config.name}_Id`,\n                className: \"fas fa-question-circle toolTipQuestion\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 292,\n                columnNumber: 63\n              }, this), /*#__PURE__*/_jsxDEV(CommonTooltip, {\n                tooltipId: `CO_config_${config.name}_Id`,\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"Daobull_tooltip_content\",\n                  children: this.getTooltipText(config.name)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 293,\n                  columnNumber: 82\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 293,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"voting-value-box\",\n              children: config.values.map((data, k) => {\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `${data.abbrevation} observtion-suffix`,\n                  children: /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"Number\",\n                    className: `voting-value ${data.abbrevation}` // value={`${this.state.editVoteConfiguration[data.name]}${data.abbrevation}`}\n                    ,\n                    placeholder: `${data.value}${data.abbrevation}`,\n                    onChange: event => this.editVotingConfig(event, data.name, data.abbrevation)\n                  }, k, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 299,\n                    columnNumber: 37\n                  }, this)\n                }, k, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 298,\n                  columnNumber: 33\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 295,\n              columnNumber: 21\n            }, this), config.errMsg != '' && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"errMsg\",\n              style: {\n                marginBottom: '29px',\n                marginTop: '-22px'\n              },\n              children: config.errMsg\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 311,\n              columnNumber: 45\n            }, this)]\n          }, i, true, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 25\n          }, this);\n        }), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            marginTop: '-32px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"organisation-btn next-btn voting-next-btn\",\n            onClick: () => this.next('votingConfiguration'),\n            children: \"Next\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 316,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"organisation-btn next-btn voting-next-btn returnBtn\",\n            onClick: () => this.setState({\n              step: 3\n            }),\n            children: \"Return\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 16\n      }, this);\n    };\n\n    this.onChangeOfAmtShares = e => {};\n\n    this.onChangeOfSymbol = e => {};\n\n    this.shareHolderFormFromat = () => {\n      let shareHoldersList = [];\n\n      for (let i = 0; i < this.state.shareHolderCount; i++) {\n        shareHoldersList.push( /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [i === 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flexContainer\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"share-col-1\",\n                style: {\n                  width: '160px'\n                },\n                children: [\"Amount of Shares \", /*#__PURE__*/_jsxDEV(\"i\", {\n                  \"data-tip\": true,\n                  \"data-for\": \"CO_Amount_Of_Shares_Id\",\n                  className: \"fas fa-question-circle toolTipQuestion\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 340,\n                  columnNumber: 106\n                }, this), /*#__PURE__*/_jsxDEV(CommonTooltip, {\n                  tooltipId: \"CO_Amount_Of_Shares_Id\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"Daobull_tooltip_content\",\n                    children: this.getTooltipText(\"Amount of Shares\")\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 341,\n                    columnNumber: 87\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 341,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 340,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"share-col-2\",\n                children: [\"Symbol \", /*#__PURE__*/_jsxDEV(\"i\", {\n                  \"data-tip\": true,\n                  \"data-for\": \"CO_Symbol_Id\",\n                  className: \"fas fa-question-circle toolTipQuestion\",\n                  children: /*#__PURE__*/_jsxDEV(CommonTooltip, {\n                    tooltipId: \"CO_Symbol_Id\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"Daobull_tooltip_content\",\n                      children: this.getTooltipText(\"Symbol\")\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 344,\n                      columnNumber: 77\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 344,\n                    columnNumber: 37\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 343,\n                  columnNumber: 70\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 343,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 338,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flexContainer\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                style: {\n                  width: '160px'\n                },\n                type: \"Number\",\n                className: \"organisations-TextBox org-txtBox-col-1\",\n                onChange: (event, newValue) => this.onShareNameChange(event, newValue, 'amount', i),\n                value: this.state.shareHoldersinfo.amount,\n                placeholder: 'eg: 100,000'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 350,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: this.state.shareHoldersinfo.symbol,\n                className: \"organisations-TextBox org-txtBox-col-2\",\n                onChange: (event, newValue) => this.onShareNameChange(event, newValue, 'symbol', i),\n                placeholder: 'eg: ABC'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 358,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 349,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flexContainer\",\n              style: {\n                marginBottom: '10px',\n                marginTop: '-20px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"errMsg\",\n                style: {\n                  marginBottom: '0px',\n                  width: '160px',\n                  marginRight: '16px'\n                },\n                children: this.state.shareHoldersinfo.amountErrMsg\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 366,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"errMsg\",\n                style: {\n                  marginBottom: '0px'\n                },\n                children: this.state.shareHoldersinfo.symbolErrMsg\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 367,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 365,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 337,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flexContainer\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"share-col-1\",\n              children: [\"Shareholders \", /*#__PURE__*/_jsxDEV(\"i\", {\n                \"data-tip\": true,\n                \"data-for\": \"CO_Shareholders_Id\",\n                className: \"fas fa-question-circle toolTipQuestion\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 373,\n                columnNumber: 67\n              }, this), /*#__PURE__*/_jsxDEV(CommonTooltip, {\n                tooltipId: \"CO_Shareholders_Id\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"Daobull_tooltip_content\",\n                  children: \"Account names must be 12 characters long and only include the characters 12345abcdefghijklmnopqrstuvwxyz\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 374,\n                  columnNumber: 75\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 374,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 373,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"share-col-2\",\n              children: [\"Balances \", /*#__PURE__*/_jsxDEV(\"i\", {\n                \"data-tip\": true,\n                \"data-for\": \"CO_Balances_Id\",\n                className: \"fas fa-question-circle toolTipQuestion\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 376,\n                columnNumber: 63\n              }, this), /*#__PURE__*/_jsxDEV(CommonTooltip, {\n                tooltipId: \"CO_Balances_Id\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"Daobull_tooltip_content\",\n                  children: \"Balances example: 120 ABC\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 377,\n                  columnNumber: 71\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 377,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 376,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 372,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flexContainer\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"errMsg\",\n              style: {\n                marginBottom: '0px',\n                width: '424px',\n                marginRight: '16px'\n              },\n              children: this.state.shareHoldersAccount[i].errMsg\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 381,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"errMsg\",\n              style: {\n                marginBottom: '0px',\n                width: '100px'\n              },\n              children: this.state.shareHoldersAccount[i].balanceError\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 382,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 380,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flexContainer\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              className: \"organisations-TextBox org-txtBox-col-1\",\n              value: this.state.shareHoldersAccount[i].shareholderAccount,\n              onChange: (event, newValue) => this.onShareNameAccountChange(event, newValue, 'shareholderAccount', i),\n              placeholder: 'Enter EOS Account Name'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 385,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              className: \"organisations-TextBox org-txtBox-col-2\",\n              value: this.state.shareHoldersAccount[i].balance,\n              onChange: (event, newValue) => this.onShareNameAccountChange(event, newValue, 'balance', i),\n              placeholder: '-'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 391,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 384,\n            columnNumber: 21\n          }, this)]\n        }, i, true, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 17\n        }, this));\n      }\n\n      return shareHoldersList;\n    };\n\n    this.renderStepFive = () => {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-heading\",\n          children: \"Configure Shareholders\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 406,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"voting-subInfo\",\n          children: \"Edit at a later date within shareholder settings.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 407,\n          columnNumber: 13\n        }, this), this.shareHolderFormFromat(), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"organisation-btn next-btn addMore-share-btn\",\n          onClick: this.addMoreShares,\n          children: \"Add More\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 410,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"organisation-btn next-btn voting-next-btn\",\n            onClick: () => this.next('Configure Shareholders'),\n            children: \"Next\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 412,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"organisation-btn next-btn voting-next-btn returnBtn\",\n            onClick: () => this.setState({\n              step: 4\n            }),\n            children: \"Return\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 415,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 411,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 405,\n        columnNumber: 16\n      }, this);\n    };\n\n    this.renderStepSix = () => {\n      let setUpData = this.state.setUpData;\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-heading\",\n          children: \"Confirm Setup\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 425,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"voting-subInfo\",\n          children: \"Check your set up & continue when you\\u2019re ready.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 426,\n          columnNumber: 13\n        }, this), setUpData.map((obj, i) => {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"organisations-TextBox confirmSetup\",\n            children: [obj, /*#__PURE__*/_jsxDEV(\"span\", {\n              onClick: () => {\n                if (i === 0) {\n                  this.setState({\n                    step: 3,\n                    isEditClick: true\n                  });\n                } else if (i === 1) {\n                  this.setState({\n                    step: 4,\n                    isEditClick: true\n                  });\n                } else {\n                  this.setState({\n                    step: 5,\n                    isEditClick: true\n                  });\n                }\n              },\n              className: \"editSetup\",\n              children: \"Edit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 429,\n              columnNumber: 21\n            }, this)]\n          }, i, true, {\n            fileName: _jsxFileName,\n            lineNumber: 428,\n            columnNumber: 25\n          }, this);\n        }), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"organisation-btn next-btn setup-next-btn\",\n          onClick: this.createOrganisation,\n          children: \"Create Organisation\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 440,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 424,\n        columnNumber: 16\n      }, this);\n    };\n\n    this.state = {\n      step: props.activeUser ? 3 : 1,\n      loading: false,\n      shareHolderCount: 1,\n      activeUser: null,\n      errMsg: '',\n      eosio: new EOSIOApi(config.REACT_APP_EOSIO_CONTRACT_ACCOUNT, this.props.activeUser),\n      accountName: props.accountName && props.accountName ? props.accountName : '',\n      shareHoldersinfo: {\n        shareholderName: '',\n        amount: '',\n        symbol: '',\n        errMsg: ''\n      },\n      shareHoldersAccount: [{\n        shareholderAccount: '',\n        balance: '',\n        errMsg: '',\n        balanceError: ''\n      }],\n      selectedOrganisation: '',\n      defaultOrganisation: 'Forest Fund',\n      editVoteConfiguration: { ...defultEditVoteConfiguration\n      },\n      supportVoteErrorInput: '',\n      isEditClick: false,\n      votingConfiguration: [{\n        name: 'Support %',\n        errMsg: '',\n        values: [{\n          value: 10,\n          abbrevation: '%',\n          name: 'supportVote'\n        }]\n      }, {\n        name: 'Minimal Approval %',\n        errMsg: '',\n        values: [{\n          value: 10,\n          abbrevation: '%',\n          name: 'minimalApproval',\n          errMsg: ''\n        }]\n      }, {\n        name: 'Vote Duration',\n        errMsg: '',\n        values: [{\n          value: 1,\n          abbrevation: ' Day',\n          name: 'voteDayDuration',\n          errMsg: ''\n        }, {\n          value: 0,\n          abbrevation: ' Hours',\n          name: 'voteHourDuration',\n          errMsg: ''\n        }, {\n          value: 0,\n          abbrevation: ' Mins',\n          name: 'voteMinDuration',\n          errMsg: ''\n        }]\n      }],\n      setUpData: ['Name', 'Voting', 'Shareholders']\n    };\n  }\n\n  componentDidMount() {}\n\n  componentDidUpdate() {\n    if (this.props.activeUser && this.state.activeUser !== this.props.activeUser) {\n      this.setState({\n        step: 3,\n        activeUser: this.props.activeUser\n      });\n    }\n  }\n\n  render() {\n    let {\n      step\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cardContainer\",\n      style: {\n        backgroundColor: 'rgb(246, 246, 246)'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card\",\n        children: [step !== 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"item\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"notify-badge\",\n            children: step === 6 ? 'Review' : `Step ${step} of 5`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 452,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 451,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"Orgnisation-container\",\n          children: [step === 1 && this.renderStepOne(), step === 2 && /*#__PURE__*/_jsxDEV(WalletList, { ...this.props\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 457,\n            columnNumber: 40\n          }, this), step === 3 && this.renderStepThree(), step === 4 && this.renderStepFour(), step === 5 && this.renderStepFive(), step === 6 && this.renderStepSix(), step === 0 && this.setOrganisation()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 455,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 449,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 448,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    setDaotokensList: value => dispatch(actions.setDaotokensList(value)),\n    setCreatorsList: value => dispatch(actions.setCreatorsList(value)),\n    setOrganisationList: value => dispatch(actions.setOrganisationList(value)),\n    setActiveEosAccount: value => dispatch(actions.setActiveEosAccount(value))\n  };\n};\n\nexport default withRouter(connect(null, mapDispatchToProps)(CreateOrganisation));","map":{"version":3,"sources":["/home/turbo/devel/MyGame/contracts/eos-hackathon/decentralize-io-ui/src/components/Pages/CreateOrganisation/CreateOrganisation.js"],"names":["React","Loading","EOSIOApi","config","withRouter","WalletList","actions","connect","REACT_APP_EOSIO_CONTRACT_ACCOUNT","CommonTooltip","lastStep","defultEditVoteConfiguration","supportVote","minimalApproval","voteDayDuration","voteHourDuration","voteMinDuration","CreateOrganisation","Component","constructor","props","createOrganisation","accountName","selectedOrganisation","editVoteConfiguration","shareHoldersinfo","shareHoldersAccount","state","minutesvote","data","creator","daoname","support","minsupport","token","amount","concat","symbol","users","map","value","shareholderAccount","balances","balance","setState","step","loading","isEditClick","createdaoData","activeUser","transaction","isError","creators","eosio","getTableScope","totalData","rows","length","i","count","setCreatorsList","daoList","getTableRows","newSelectedDAO","setOrganisationList","filter","obj","history","push","id","err","alert","setOrganisation","editVotingConfig","event","key","target","Number","selectOrganisation","errMsg","next","stateName","votingConfiguration","supportVoteErrorInput","cloneVotingConfig","name","values","abbrevation","dao","toUpperCase","trim","match","amountErrMsg","exec","symbolErrMsg","regex","regex1","RegExp","balanceError","addMoreShares","shareHolderCount","onShareNameChange","contentType","onShareNameAccountChange","getTooltipText","renderStepOne","renderStepThree","renderStepFour","k","marginBottom","marginTop","display","onChangeOfAmtShares","e","onChangeOfSymbol","shareHolderFormFromat","shareHoldersList","width","newValue","marginRight","renderStepFive","renderStepSix","setUpData","shareholderName","defaultOrganisation","componentDidMount","componentDidUpdate","render","backgroundColor","mapDispatchToProps","dispatch","setDaotokensList","setActiveEosAccount"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport './CreateOrganisation.css'\nimport Loading from '../../Loading/Loading';\nimport EOSIOApi from '../../../common/eosio-apiService';\nimport config from '../../../common/config'\nimport { withRouter } from \"react-router-dom\";\nimport WalletList from \"../../WalletList/WalletList\";\nimport * as actions from \"../Redux/Actions/index\";\nimport { connect } from \"react-redux\";\nimport { REACT_APP_EOSIO_CONTRACT_ACCOUNT } from \"../../../common/config\";\nimport CommonTooltip from '../../Tooltip/CommonTooltip';\n\nconst lastStep = 6;\n\nconst defultEditVoteConfiguration = {\n    supportVote: 10,\n    minimalApproval: 10,\n    voteDayDuration: 1,\n    voteHourDuration: 0,\n    voteMinDuration: 0,\n}\nclass CreateOrganisation extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            step: props.activeUser ? 3 : 1,\n            loading: false,\n            shareHolderCount: 1,\n            activeUser: null,\n            errMsg: '',\n            eosio: new EOSIOApi(config.REACT_APP_EOSIO_CONTRACT_ACCOUNT, this.props.activeUser),\n            accountName: props.accountName && props.accountName ? props.accountName : '',\n            shareHoldersinfo: { shareholderName: '', amount: '', symbol: '', errMsg: '' },\n            shareHoldersAccount: [{ shareholderAccount: '', balance: '', errMsg: '', balanceError: '' }],\n            selectedOrganisation: '',\n            defaultOrganisation: 'Forest Fund',\n            editVoteConfiguration: {\n                ...defultEditVoteConfiguration\n            },\n            supportVoteErrorInput: '',\n            isEditClick: false,\n            votingConfiguration: [\n                { name: 'Support %', errMsg: '', values: [{ value: 10, abbrevation: '%', name: 'supportVote' }] },\n                { name: 'Minimal Approval %', errMsg: '', values: [{ value: 10, abbrevation: '%', name: 'minimalApproval', errMsg: '' }] },\n                {\n                    name: 'Vote Duration', errMsg: '', values: [\n                        { value: 1, abbrevation: ' Day', name: 'voteDayDuration', errMsg: '' },\n                        { value: 0, abbrevation: ' Hours', name: 'voteHourDuration', errMsg: '' },\n                        { value: 0, abbrevation: ' Mins', name: 'voteMinDuration', errMsg: '' }]\n                }],\n            setUpData: ['Name', 'Voting', 'Shareholders']\n        }\n    }\n\n    componentDidMount() {\n    }\n\n    componentDidUpdate() {\n        if (this.props.activeUser && this.state.activeUser !== this.props.activeUser) {\n            this.setState({ step: 3, activeUser: this.props.activeUser })\n        }\n    }\n\n    createOrganisation = async () => {\n        let { accountName } = this.props\n        let { selectedOrganisation, editVoteConfiguration, shareHoldersinfo, shareHoldersAccount } = this.state,\n            { voteDayDuration, voteHourDuration, voteMinDuration } = editVoteConfiguration,\n            minutesvote = voteDayDuration * 24 * 60 + voteHourDuration * 60 + voteMinDuration;\n        let data = {\n            creator: accountName,\n            daoname: selectedOrganisation,\n            support: editVoteConfiguration.supportVote,\n            minsupport: editVoteConfiguration.minimalApproval,\n            minutesvote,\n            token: (`${shareHoldersinfo.amount} `).concat(shareHoldersinfo.symbol),\n            users: shareHoldersAccount.map(value => value.shareholderAccount),\n            balances: shareHoldersAccount.map(value => value.balance)\n\n        }\n        this.setState({ step: 0, loading: true, isEditClick: false })\n        try {\n            let createdaoData = await new EOSIOApi(config.REACT_APP_EOSIO_CONTRACT_ACCOUNT, this.props.activeUser).transaction(accountName, 'createdao', { ...data })\n            if (createdaoData.isError) {\n                this.setState({ loading: false, step: 6 })\n            } else {\n                let creators = await this.state.eosio.getTableScope('daotokens123', 'accounts', 'bigpicturesw')\n                let totalData = 0\n                if (creators.rows && creators.rows.length > 0) {\n                    for (var i = 0; i < creators.rows.length; i++)\n                        totalData += creators.rows[i].count;\n                    await this.props.setCreatorsList(creators.rows)\n                }\n                let daoList = await this.state.eosio.getTableRows(config.REACT_APP_EOSIO_CONTRACT_ACCOUNT, 'bigpicturesw', 'dao', 0, totalData, totalData)\n                let newSelectedDAO = []\n                await this.props.setOrganisationList(daoList.data.rows)\n                if (daoList.data && daoList.data.rows && daoList.data.rows.length > 0) {\n                    newSelectedDAO = daoList.data.rows.filter(obj => obj.data.daoname === selectedOrganisation)\n                }\n                if (newSelectedDAO.length > 0) \n                    this.props.history.push(`/organisation/Shareholeders/${newSelectedDAO[0].data.id}`)\n                else\n                    this.props.history.push('/')\n            }\n\n        } catch (err) {\n            alert(err)\n            this.props.history.push('/')\n        }\n    }\n\n    setOrganisation = () => {\n        return (\n            <div className=\"organisationHeading\">\n                <div className='card-heading'>Creating Organisation</div>\n                <Loading />\n            </div>\n        )\n    }\n\n    editVotingConfig = (event, key, symbol) => {\n        let editVoteConfiguration = this.state.editVoteConfiguration\n        editVoteConfiguration[key] = event.target.value === '' ? defultEditVoteConfiguration[key] : Number(event.target.value)\n        this.setState({ editVoteConfiguration: editVoteConfiguration })\n    }\n\n    selectOrganisation = (event, value) => {\n        this.setState({ selectedOrganisation: event.target.value, errMsg: event.target.value !== '' && '' })\n    }\n\n    next = (stateName) => {\n        let { step, selectedOrganisation, errMsg = '', votingConfiguration, supportVoteErrorInput = '', shareHoldersinfo, shareHoldersAccount, isError = false } = this.state\n        let cloneVotingConfig = [\n            { name: 'Support %', errMsg: '', values: [{ value: this.state.editVoteConfiguration.supportVote, abbrevation: '%', name: 'supportVote' }] },\n            { name: 'Minimal Approval %', errMsg: '', values: [{ value: this.state.editVoteConfiguration.minimalApproval, abbrevation: '%', name: 'minimalApproval', errMsg: '' }] },\n            {\n                name: 'Vote Duration', errMsg: '', values: [\n                    { value: this.state.editVoteConfiguration.voteDayDuration, abbrevation: ' Day', name: 'voteDayDuration', errMsg: '' },\n                    { value: this.state.editVoteConfiguration.voteHourDuration, abbrevation: ' Hours', name: 'voteHourDuration', errMsg: '' },\n                    { value: this.state.editVoteConfiguration.voteMinDuration, abbrevation: ' Mins', name: 'voteMinDuration', errMsg: '' }]\n            }]\n        if (stateName === 'selectedOrganisation') {\n            if (selectedOrganisation === '' || selectedOrganisation.length < 5) {\n                errMsg = 'Organisation name must be greater than or equal 5 characters.'\n                isError = true\n            } else if (this.props.daoList.filter((dao) => (dao.data.daoname).toUpperCase().trim() === selectedOrganisation.toUpperCase().trim()).length > 0) {\n                errMsg = 'Organisation name already exits'\n                isError = true\n            } else if (selectedOrganisation.match(/^\\d/)) {\n                errMsg = `Organisation name can't start with number`\n                isError = true\n            }\n        } else if (stateName === 'votingConfiguration') {\n            if (this.state.editVoteConfiguration.supportVote < this.state.editVoteConfiguration.minimalApproval) {\n                errMsg = 'Support % should be equal or more than minimal qpproval'\n                cloneVotingConfig.filter((obj) => obj.name === 'Support %')[0].errMsg = errMsg\n                isError = true\n            } else if (this.state.editVoteConfiguration.supportVote > this.state.editVoteConfiguration.minimalApproval) {\n                errMsg = ''\n                cloneVotingConfig.filter((obj) => obj.name === 'Support %')[0].errMsg = errMsg\n            }\n            if (this.state.editVoteConfiguration.voteDayDuration === 0\n                && this.state.editVoteConfiguration.voteHourDuration === 0\n                && this.state.editVoteConfiguration.voteMinDuration === 0) {\n                errMsg = `Vote duration can't be 0`\n                cloneVotingConfig.filter((obj) => obj.name === 'Vote Duration')[0].errMsg = errMsg\n                isError = true\n            } else {\n                errMsg = ''\n                cloneVotingConfig.filter((obj) => obj.name === 'Vote Duration')[0].errMsg = errMsg\n            }\n        } else if (stateName === 'Configure Shareholders') {\n            if (shareHoldersinfo.amount === '') {\n                shareHoldersinfo.amountErrMsg = 'Please add amount'\n                isError = true\n            } else {\n                shareHoldersinfo.amountErrMsg = ''\n            }\n            if (shareHoldersinfo.symbol === '' || shareHoldersinfo.symbol.length > 7 || /^[A-Z]+$/gm.exec(shareHoldersinfo.symbol) === null) {\n                shareHoldersinfo.symbolErrMsg = 'Symbol is an all uppercase string of 7 or less characters from [A-Z] '\n                isError = true\n            } else {\n                shareHoldersinfo.symbolErrMsg = ''\n            }\n\n            for (let i = 0; i < shareHoldersAccount.length; i++) {\n                const regex = /[^a-z0-5]/gm;\n                var regex1 = new RegExp('(\\\\d+(?:\\\\.\\\\d+)?\\\\s' + shareHoldersinfo.symbol + ')')\n                if (!(regex1.exec(shareHoldersAccount[i].balance))) {\n                    isError = true\n                    shareHoldersAccount[i].balanceError = `Balance:100 ${shareHoldersinfo.symbol}`\n                } else {\n                    shareHoldersAccount[i].errMsg = ''\n                }\n                if (shareHoldersAccount[i].shareholderAccount.length < 12 || regex.exec(shareHoldersAccount[i].shareholderAccount) != null || shareHoldersAccount[i].shareholderAccount.length > 14 || shareHoldersAccount[i].shareholderAccount === '') {\n                    isError = true\n                    shareHoldersAccount[i].errMsg = 'Account names must be 12 characters long and only include the characters 12345abcdefghijklmnopqrstuvwxyz'\n                } else {\n                    shareHoldersAccount[i].errMsg = ''\n                }\n            }\n        }\n        this.setState({\n            step: isError ? step : this.state.isEditClick ? lastStep : step + 1,\n            errMsg: isError ? errMsg : '',\n            supportVoteErrorInput,\n            shareHoldersinfo,\n            shareHoldersAccount,\n            votingConfiguration: cloneVotingConfig\n        })\n    }\n\n    addMoreShares = () => {\n        let shareHoldersAccount = this.state.shareHoldersAccount\n        shareHoldersAccount.push({ shareholderAccount: '', balance: '', balanceError: '', errMsg: '' })\n        let shareHolderCount = this.state.shareHolderCount\n        this.setState({ shareHolderCount: shareHolderCount + 1, shareHoldersAccount })\n    }\n\n    onShareNameChange = (event, value, contentType, i) => {\n        let shareHoldersinfo = this.state.shareHoldersinfo\n        shareHoldersinfo[contentType] = (event.target.value).trim()\n        this.setState({ shareHoldersinfo })\n    }\n\n    onShareNameAccountChange = (event, value, contentType, i) => {\n        let shareHoldersAccount = this.state.shareHoldersAccount\n        shareHoldersAccount[i][contentType] = event.target.value\n        if (shareHoldersAccount[i].errMsg !== '' && event.target.value !== '')\n            shareHoldersAccount[i].errMsg = ''\n        if (shareHoldersAccount[i].balanceError !== '' && event.target.value !== '')\n            shareHoldersAccount[i].balanceError = ''\n        this.setState({ shareHoldersAccount })\n    }\n\n    getTooltipText = (name) =>{\n        switch(name) {\n            case \"Support %\": \n            return \"Support Percentage\";\n            case \"Minimal Approval %\": \n            return \"Minimal Approval Percentage\";\n            case \"Vote Duration\": \n            return \"Voting expiry time\";\n            case \"Symbol\": \n            return \"Symbol is an all uppercase string of 7 or less characters from [A-Z]\";\n            case \"Amount of Shares\": \n            return \"Total amount of Shares\";\n            case \"Symbol\": \n            return \"Symbol is an all uppercase string of 7 or less characters from [A-Z]\";\n            default: return \"NA\";\n        }\n    }\n\n    renderStepOne = () => {\n        return <div>\n            <div className='card-heading'>Connect Wallet</div>\n            <div className='card-description'>To create an organisation you need to connect your EOS account, please click connect below and follow the instruction to connect.</div>\n            <button className=\"organisation-btn organisation-connectbtn\" onClick={() => this.setState({ step: 2 })}>\n                {/* <i className=\"fa fa-copy connectBtnIcon\"></i> */}\n                Connect</button>\n            <div className=\"card-bottom\">\n                <div className=\"card-bottom-container\">\n                    <i className=\"fa fa-lock lock\"></i><span className=\"card-bottom-container-heading\">Create Wallet (Coming soon) </span>\n                    <div className=\"card-bottom-container-summary\">\n                        We’re working on a simplfied sign up experience for none blockchain users, check back soon for an update.\n                    </div>\n                </div>\n            </div>\n        </div>\n    }\n\n    renderStepThree = () => {\n        let { selectedOrganisation, errMsg } = this.state\n        return <div>\n            <div className='card-heading'>Organisation Name</div>\n            <div className='Organisations'>Name</div>\n            <input type=\"text\" value={selectedOrganisation} className='organisations-TextBox'\n                onChange={(event, value) => { this.selectOrganisation(event, value) }}\n                placeholder={selectedOrganisation === '' ? 'Select Organisation Name…' : selectedOrganisation} />\n            <div className=\"errMsg\">{errMsg}</div>\n            <button className=\"organisation-btn next-btn\" onClick={() => this.next('selectedOrganisation')}>Next</button>\n        </div>\n\n    }\n\n    renderStepFour = () => {\n        let { votingConfiguration, errMsg } = this.state\n        return <div>\n            <div className='card-heading'>Configure Voting</div>\n            <div className='voting-subInfo'>Edit at a later date within voting settings.</div>\n            {votingConfiguration.map((config, i) => {\n                return (<span key={i}>\n                    <div className=\"voting-txt\">{config.name} <i data-tip data-for={`CO_config_${config.name}_Id`} className=\"fas fa-question-circle toolTipQuestion\"></i>\n                        <CommonTooltip tooltipId={`CO_config_${config.name}_Id`}><div className=\"Daobull_tooltip_content\">{this.getTooltipText(config.name)}</div></CommonTooltip>\n                    </div>\n                    <span className=\"voting-value-box\">\n                        {config.values.map((data, k) => {\n                            return (\n                                <div className={`${data.abbrevation} observtion-suffix`} key={k} >\n                                    <input\n                                        type=\"Number\"\n                                        className={`voting-value ${data.abbrevation}`}\n                                        // value={`${this.state.editVoteConfiguration[data.name]}${data.abbrevation}`}\n                                        key={k}\n                                        placeholder={`${data.value}${data.abbrevation}`}\n                                        onChange={(event) => this.editVotingConfig(event, data.name, data.abbrevation)} />\n\n                                </div>\n                            )\n                        })}\n                    </span>\n                    {config.errMsg != '' && <div className=\"errMsg\" style={{ marginBottom: '29px', marginTop: '-22px' }}>{config.errMsg}</div>}\n\n                </span>)\n            })}\n            <div style={{ display: 'flex', marginTop: '-32px' }}>\n                <button className=\"organisation-btn next-btn voting-next-btn\" onClick={() => this.next('votingConfiguration')}>Next</button>\n                <button className=\"organisation-btn next-btn voting-next-btn returnBtn\"\n                    onClick={() => this.setState({ step: 3 })} >Return</button>\n            </div>\n        </div>\n\n    }\n    onChangeOfAmtShares = (e) => {\n\n    }\n\n    onChangeOfSymbol = (e) => {\n\n    }\n\n    shareHolderFormFromat = () => {\n        let shareHoldersList = []\n        for (let i = 0; i < this.state.shareHolderCount; i++) {\n            shareHoldersList.push(\n                <span key={i}>\n                    {i === 0 &&\n                        <span>\n                            <div className=\"flexContainer\">\n\n                                <div className='share-col-1' style={{ width: '160px' }}>Amount of Shares <i data-tip data-for=\"CO_Amount_Of_Shares_Id\" className=\"fas fa-question-circle toolTipQuestion\"></i>\n                                    <CommonTooltip tooltipId=\"CO_Amount_Of_Shares_Id\"><div className=\"Daobull_tooltip_content\">{this.getTooltipText(\"Amount of Shares\")}</div></CommonTooltip>\n                                </div>\n                                <div className='share-col-2' >Symbol <i data-tip data-for=\"CO_Symbol_Id\" className=\"fas fa-question-circle toolTipQuestion\">\n                                    <CommonTooltip tooltipId=\"CO_Symbol_Id\"><div className=\"Daobull_tooltip_content\">{this.getTooltipText(\"Symbol\")}</div></CommonTooltip>\n                                </i></div>\n                            </div>\n\n\n                            <div className=\"flexContainer\">\n                                <input type=\"text\"\n                                    style={{ width: '160px' }}\n                                    type=\"Number\"\n                                    className='organisations-TextBox org-txtBox-col-1'\n                                    onChange={(event, newValue) => this.onShareNameChange(event, newValue, 'amount', i)}\n                                    value={this.state.shareHoldersinfo.amount}\n                                    placeholder={'eg: 100,000'} />\n\n                                <input type=\"text\"\n                                    value={this.state.shareHoldersinfo.symbol}\n                                    className='organisations-TextBox org-txtBox-col-2'\n                                    onChange={(event, newValue) => this.onShareNameChange(event, newValue, 'symbol', i)}\n                                    placeholder={'eg: ABC'} />\n\n                            </div>\n                            <div className=\"flexContainer\" style={{ marginBottom: '10px', marginTop: '-20px' }}>\n                                <div className=\"errMsg\" style={{ marginBottom: '0px', width: '160px', marginRight: '16px' }}>{this.state.shareHoldersinfo.amountErrMsg}</div>\n                                <div className=\"errMsg\" style={{ marginBottom: '0px' }}>{this.state.shareHoldersinfo.symbolErrMsg}</div>\n                            </div>\n\n                        </span>\n                    }\n                    <div className=\"flexContainer\">\n                        <div className='share-col-1'>Shareholders <i data-tip data-for=\"CO_Shareholders_Id\" className=\"fas fa-question-circle toolTipQuestion\"></i>\n                            <CommonTooltip tooltipId=\"CO_Shareholders_Id\"><div className=\"Daobull_tooltip_content\">Account names must be 12 characters long and only include the characters 12345abcdefghijklmnopqrstuvwxyz</div></CommonTooltip>\n                        </div>\n                        <div className='share-col-2'>Balances <i data-tip data-for=\"CO_Balances_Id\" className=\"fas fa-question-circle toolTipQuestion\"></i>\n                            <CommonTooltip tooltipId=\"CO_Balances_Id\"><div className=\"Daobull_tooltip_content\">Balances example: 120 ABC</div></CommonTooltip>\n                        </div>\n                    </div>\n                    <div className=\"flexContainer\">\n                        <div className=\"errMsg\" style={{ marginBottom: '0px', width: '424px', marginRight: '16px' }}>{this.state.shareHoldersAccount[i].errMsg}</div>\n                        <div className=\"errMsg\" style={{ marginBottom: '0px', width: '100px' }}>{this.state.shareHoldersAccount[i].balanceError}</div>\n                    </div>\n                    <div className=\"flexContainer\">\n                        <input type=\"text\"\n                            className='organisations-TextBox org-txtBox-col-1'\n                            value={this.state.shareHoldersAccount[i].shareholderAccount}\n                            onChange={(event, newValue) => this.onShareNameAccountChange(event, newValue, 'shareholderAccount', i)}\n                            placeholder={'Enter EOS Account Name'} />\n\n                        <input type=\"text\"\n                            className='organisations-TextBox org-txtBox-col-2'\n                            value={this.state.shareHoldersAccount[i].balance}\n                            onChange={(event, newValue) => this.onShareNameAccountChange(event, newValue, 'balance', i)}\n                            placeholder={'-'} />\n\n                    </div>\n                </span>\n            )\n        }\n        return shareHoldersList\n    }\n\n    renderStepFive = () => {\n        return <div>\n            <div className='card-heading'>Configure Shareholders</div>\n            <div className='voting-subInfo'>Edit at a later date within shareholder settings.</div>\n            {this.shareHolderFormFromat()}\n            {/* {this.state.addMore === 1 && this.shareHolderFormFromat()} */}\n            <button className=\"organisation-btn next-btn addMore-share-btn\" onClick={this.addMoreShares}>Add More</button>\n            <div style={{ display: 'flex' }}>\n                <button className=\"organisation-btn next-btn voting-next-btn\"\n                    onClick={() => this.next('Configure Shareholders')} >Next</button>\n\n                <button className=\"organisation-btn next-btn voting-next-btn returnBtn\"\n                    onClick={() => this.setState({ step: 4 })} >Return</button>\n            </div>\n        </div>\n\n    }\n\n    renderStepSix = () => {\n        let setUpData = this.state.setUpData\n        return <div>\n            <div className='card-heading'>Confirm Setup</div>\n            <div className='voting-subInfo'>Check your set up & continue when you’re ready.</div>\n            {setUpData.map((obj, i) => {\n                return (<div className='organisations-TextBox confirmSetup' key={i}>{obj}\n                    <span onClick={() => {\n                        if (i === 0) {\n                            this.setState({ step: 3, isEditClick: true });\n                        } else if (i === 1) {\n                            this.setState({ step: 4, isEditClick: true });\n                        } else {\n                            this.setState({ step: 5, isEditClick: true });\n                        }\n                    }} className=\"editSetup\">Edit</span>\n                </div>)\n            })}\n            <button className=\"organisation-btn next-btn setup-next-btn\" onClick={this.createOrganisation}>Create Organisation</button>\n        </div>\n\n    }\n\n    render() {\n        let { step } = this.state\n        return (\n            <div className='cardContainer' style={{ backgroundColor: 'rgb(246, 246, 246)' }}>\n                <div className=\"card\">\n                    {step !== 0 &&\n                        <div className=\"item\">\n                            <span className=\"notify-badge\">{step === 6 ? 'Review' : `Step ${step} of 5`}</span>\n                        </div>}\n\n                    <div className=\"Orgnisation-container\">\n                        {step === 1 && this.renderStepOne()}\n                        {step === 2 && <WalletList {...this.props} />}\n                        {step === 3 && this.renderStepThree()}\n                        {step === 4 && this.renderStepFour()}\n                        {step === 5 && this.renderStepFive()}\n                        {step === 6 && this.renderStepSix()}\n                        {step === 0 && this.setOrganisation()}\n                    </div>\n\n                </div>\n            </div>\n        )\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        setDaotokensList: (value) => dispatch(actions.setDaotokensList(value)),\n        setCreatorsList: (value) => dispatch(actions.setCreatorsList(value)),\n        setOrganisationList: (value) => dispatch(actions.setOrganisationList(value)),\n        setActiveEosAccount: (value) => dispatch(actions.setActiveEosAccount(value))\n    }\n};\n\n\nexport default withRouter(connect(null, mapDispatchToProps)(CreateOrganisation));"]},"metadata":{},"sourceType":"module"}