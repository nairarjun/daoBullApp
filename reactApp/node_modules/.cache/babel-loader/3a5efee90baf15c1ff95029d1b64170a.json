{"ast":null,"code":"var _jsxFileName = \"/home/turbo/devel/MyGame/contracts/eos-hackathon/decentralize-io-ui/src/components/Pages/Organisations/TransactionFund/TransactionFund.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport './TransactionFund.css';\nimport { Modal } from \"react-bootstrap\";\nimport { REACT_APP_EOSIO_CONTRACT_ACCOUNT } from \"../../../../common/config\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction TransactionFund(props) {\n  _s();\n\n  const [shareHolderCount, addShareHolderCount] = useState(1);\n  const [shareHoldersAccount, addShareHoldersAccount] = useState([{\n    shareholderAccount: '',\n    balance: '',\n    balanceError: '',\n    errMsg: ''\n  }]);\n  let insufititentBalance = false,\n      subHeading = props.openFundModalDtls.subHeading;\n\n  if (props.openFundModalDtls.subHeading.includes('9900')) {\n    if (props.unallocatedSharesAmt === 0) insufititentBalance = true;\n    subHeading = subHeading.replace('9900', props.unallocatedSharesAmt);\n  }\n\n  if (props.openFundModalDtls.subHeading.includes('20 FRST')) {\n    if (props.activeEosAccountBal === 0) insufititentBalance = true;\n    subHeading = subHeading.replace('20 FRST', `${props.activeEosAccountBal} FRST`).replace(\"#activeEosAccountBal#\", localStorage.getItem('activeEosAccount'));\n  }\n\n  const shareHolderFormFromat = () => {\n    let shareHoldersList = [];\n\n    for (let i = 0; i < shareHolderCount; i++) {\n      shareHoldersList.push( /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flexContainer\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"errMsg\",\n            style: {\n              marginBottom: '0px',\n              width: '424px',\n              marginRight: '16px'\n            },\n            children: shareHoldersAccount[i].errMsg\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 37,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"errMsg\",\n            style: {\n              marginBottom: '0px',\n              width: '100px'\n            },\n            children: shareHoldersAccount[i].balanceError\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 38,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 36,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flexContainer\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            className: \"organisations-TextBox org-txtBox-col-1\",\n            onChange: (event, newValue) => onShareNameAccountChange(event, newValue, 'shareholderAccount', i),\n            placeholder: props.openFundModalDtls.placeholder\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 41,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            className: \"organisations-TextBox org-txtBox-col-2\",\n            onChange: (event, newValue) => onShareNameAccountChange(event, newValue, 'balance', i),\n            placeholder: '-'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 45,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 21\n        }, this)]\n      }, i, true, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 17\n      }, this));\n    }\n\n    return shareHoldersList;\n  };\n\n  const addMoreShares = () => {\n    shareHoldersAccount.push({\n      shareholderAccount: '',\n      balance: ''\n    });\n    addShareHolderCount(shareHolderCount + 1);\n    addShareHoldersAccount(shareHoldersAccount);\n  };\n\n  const onShareNameAccountChange = (event, value, contentType, i) => {\n    shareHoldersAccount[i][contentType] = event.target.value;\n    if (shareHoldersAccount[i].errMsg !== '' && event.target.value !== '') shareHoldersAccount[i].errMsg = '';\n    if (shareHoldersAccount[i].balanceError !== '' && event.target.value !== '') shareHoldersAccount[i].balanceError = '';\n    addShareHoldersAccount(shareHoldersAccount);\n  };\n\n  const transfer = index => {\n    let isError = false,\n        token = props.selectedDAO.token.split(' ')[1],\n        myshareHoldersAccount = JSON.parse(JSON.stringify(shareHoldersAccount));\n\n    for (let i = 0; i < myshareHoldersAccount.length; i++) {\n      const regex = /[^a-z0-5]/gm;\n      var regex1 = new RegExp('(\\\\d+(?:\\\\.\\\\d+)?\\\\s' + token + ')');\n\n      if (!regex1.exec(myshareHoldersAccount[i].balance)) {\n        isError = true;\n        myshareHoldersAccount[i].balanceError = `Symbol:${token}`;\n      } else if (myshareHoldersAccount[i].balance.split(' ')[0] > props.activeEosAccountBal) {\n        isError = true;\n        myshareHoldersAccount[i].balanceError = 'overdrawn balance';\n      } else {\n        myshareHoldersAccount[i].balanceError = '';\n      }\n\n      if (regex.exec(myshareHoldersAccount[i].shareholderAccount) != null || myshareHoldersAccount[i].shareholderAccount.length < 12 || regex.exec(myshareHoldersAccount[i].shareholderAccount) != null || myshareHoldersAccount[i].shareholderAccount.length > 14 || myshareHoldersAccount[i].shareholderAccount === '') {\n        isError = true;\n        myshareHoldersAccount[i].errMsg = 'Account names must be 12 characters long and only include the characters 12345abcdefghijklmnopqrstuvwxyz';\n      } else if (myshareHoldersAccount[i].shareholderAccount === props.activeEosAccount) {\n        isError = true;\n        myshareHoldersAccount[i].errMsg = `Cann't transfer to self`;\n      } else {\n        myshareHoldersAccount[i].errMsg = '';\n      }\n    }\n\n    if (isError) {\n      addShareHoldersAccount(myshareHoldersAccount);\n    } else {\n      addShareHoldersAccount(myshareHoldersAccount);\n      props.transferToken(myshareHoldersAccount, index);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Modal, {\n      show: props.show,\n      onHide: props.handleClose,\n      animation: false,\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        children: [/*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: props.openFundModalDtls.heading\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-close\",\n          onClick: props.handleClose,\n          children: [\" \", /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fa fa-close DI-close\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 79\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-subheader\",\n        children: subHeading\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 17\n      }, this), insufititentBalance && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          color: 'red',\n          fontSize: '10px'\n        },\n        children: \" Insuffitient Shares\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 41\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flexContainer\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"share-col-1 fundtransfer-account\",\n            children: props.openFundModalDtls.fund\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"share-col-2\",\n            children: \"Balances (?)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"errMsg\",\n          style: {\n            marginBottom: '0px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 21\n        }, this), shareHolderFormFromat(), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"organisation-btn next-btn addMore-share-btn addMore-fundTransfer-btn\",\n          onClick: addMoreShares,\n          disabled: insufititentBalance,\n          children: \"Add More\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"fundtransfer-btn\",\n          onClick: () => transfer(props.openFundModalDtls.index),\n          disabled: insufititentBalance,\n          children: props.openFundModalDtls.btn\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n}\n\n_s(TransactionFund, \"dVf0B23DO9kAnhp2fd5BwLNU2V0=\");\n\n_c = TransactionFund;\nexport default _c2 = withRouter(TransactionFund);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"TransactionFund\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["/home/turbo/devel/MyGame/contracts/eos-hackathon/decentralize-io-ui/src/components/Pages/Organisations/TransactionFund/TransactionFund.js"],"names":["React","useState","withRouter","Modal","REACT_APP_EOSIO_CONTRACT_ACCOUNT","TransactionFund","props","shareHolderCount","addShareHolderCount","shareHoldersAccount","addShareHoldersAccount","shareholderAccount","balance","balanceError","errMsg","insufititentBalance","subHeading","openFundModalDtls","includes","unallocatedSharesAmt","replace","activeEosAccountBal","localStorage","getItem","shareHolderFormFromat","shareHoldersList","i","push","marginBottom","width","marginRight","event","newValue","onShareNameAccountChange","placeholder","addMoreShares","value","contentType","target","transfer","index","isError","token","selectedDAO","split","myshareHoldersAccount","JSON","parse","stringify","length","regex","regex1","RegExp","exec","activeEosAccount","transferToken","show","handleClose","heading","color","fontSize","fund","btn"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport './TransactionFund.css'\nimport { Modal } from \"react-bootstrap\";\nimport { REACT_APP_EOSIO_CONTRACT_ACCOUNT } from \"../../../../common/config\";\n\n\nfunction TransactionFund(props) {\n    const [shareHolderCount, addShareHolderCount] = useState(1);\n    const [shareHoldersAccount, addShareHoldersAccount] = useState([\n        {\n            shareholderAccount: '',\n            balance: '',\n            balanceError: '',\n            errMsg: ''\n        }]);\n\n    let insufititentBalance = false,\n        subHeading = props.openFundModalDtls.subHeading\n\n    if (props.openFundModalDtls.subHeading.includes('9900')) {\n        if (props.unallocatedSharesAmt === 0)\n            insufititentBalance = true\n        subHeading = subHeading.replace('9900', props.unallocatedSharesAmt)\n    } if (props.openFundModalDtls.subHeading.includes('20 FRST')) {\n        if (props.activeEosAccountBal === 0)\n            insufititentBalance = true\n        subHeading = subHeading.replace('20 FRST', `${props.activeEosAccountBal} FRST`).replace(\"#activeEosAccountBal#\", localStorage.getItem('activeEosAccount'))\n    }\n\n    const shareHolderFormFromat = () => {\n        let shareHoldersList = []\n        for (let i = 0; i < shareHolderCount; i++) {\n            shareHoldersList.push(\n                <span key={i}>\n                    <div className=\"flexContainer\">\n                        <div className=\"errMsg\" style={{ marginBottom: '0px', width: '424px', marginRight: '16px' }}>{shareHoldersAccount[i].errMsg}</div>\n                        <div className=\"errMsg\" style={{ marginBottom: '0px', width: '100px' }}>{shareHoldersAccount[i].balanceError}</div>\n                    </div>\n                    <div className=\"flexContainer\">\n                        <input type=\"text\"\n                            className='organisations-TextBox org-txtBox-col-1'\n                            onChange={(event, newValue) => onShareNameAccountChange(event, newValue, 'shareholderAccount', i)}\n                            placeholder={props.openFundModalDtls.placeholder} />\n                        <input type=\"text\"\n                            className='organisations-TextBox org-txtBox-col-2'\n                            onChange={(event, newValue) => onShareNameAccountChange(event, newValue, 'balance', i)}\n                            placeholder={'-'} />\n                    </div>\n                </span>\n            )\n        }\n        return shareHoldersList\n    }\n\n\n    const addMoreShares = () => {\n        shareHoldersAccount.push({ shareholderAccount: '', balance: '' })\n        addShareHolderCount(shareHolderCount + 1)\n        addShareHoldersAccount(shareHoldersAccount)\n    }\n\n    const onShareNameAccountChange = (event, value, contentType, i) => {\n        shareHoldersAccount[i][contentType] = event.target.value\n        if (shareHoldersAccount[i].errMsg !== '' && event.target.value !== '')\n            shareHoldersAccount[i].errMsg = ''\n        if (shareHoldersAccount[i].balanceError !== '' && event.target.value !== '')\n            shareHoldersAccount[i].balanceError = ''\n        addShareHoldersAccount(shareHoldersAccount)\n    }\n\n\n    const transfer = (index) => {\n        let isError = false,\n            token = props.selectedDAO.token.split(' ')[1],\n            myshareHoldersAccount = JSON.parse(JSON.stringify(shareHoldersAccount))\n\n        for (let i = 0; i < myshareHoldersAccount.length; i++) {\n            const regex = /[^a-z0-5]/gm;\n            var regex1 = new RegExp('(\\\\d+(?:\\\\.\\\\d+)?\\\\s' + token + ')')\n            if (!(regex1.exec(myshareHoldersAccount[i].balance))) {\n                isError = true\n                myshareHoldersAccount[i].balanceError = `Symbol:${token}`\n            } else if (myshareHoldersAccount[i].balance.split(' ')[0] > props.activeEosAccountBal) {\n                isError = true\n                myshareHoldersAccount[i].balanceError = 'overdrawn balance'\n            } else {\n                myshareHoldersAccount[i].balanceError = ''\n            }\n\n            if (regex.exec(myshareHoldersAccount[i].shareholderAccount) != null || myshareHoldersAccount[i].shareholderAccount.length < 12 || regex.exec(myshareHoldersAccount[i].shareholderAccount) != null || myshareHoldersAccount[i].shareholderAccount.length > 14 || myshareHoldersAccount[i].shareholderAccount === '') {\n                isError = true\n                myshareHoldersAccount[i].errMsg = 'Account names must be 12 characters long and only include the characters 12345abcdefghijklmnopqrstuvwxyz'\n            } else if (myshareHoldersAccount[i].shareholderAccount === props.activeEosAccount) {\n                isError = true\n                myshareHoldersAccount[i].errMsg = `Cann't transfer to self`\n\n            } else {\n                myshareHoldersAccount[i].errMsg = ''\n            }\n        }\n        if (isError) {\n            addShareHoldersAccount(myshareHoldersAccount)\n        } else {\n            addShareHoldersAccount(myshareHoldersAccount)\n            props.transferToken(myshareHoldersAccount, index)\n        }\n    }\n\n    return (\n        <>\n            <Modal show={props.show} onHide={props.handleClose} animation={false}>\n                <Modal.Header>\n                    <Modal.Title>{props.openFundModalDtls.heading}</Modal.Title>\n                    <div className=\"modal-close\" onClick={props.handleClose}> <i className=\"fa fa-close DI-close\"></i></div>\n                </Modal.Header>\n                <div className=\"modal-subheader\">{subHeading}</div>\n                {insufititentBalance && <div style={{ color: 'red', fontSize: '10px' }}> Insuffitient Shares</div>}\n                <Modal.Body>\n                    <div className=\"flexContainer\">\n                        <div className='share-col-1 fundtransfer-account'>{props.openFundModalDtls.fund}</div>\n                        <div className='share-col-2'>Balances (?)</div>\n                    </div>\n                    <div className=\"errMsg\" style={{ marginBottom: '0px' }}></div>\n                    {shareHolderFormFromat()}\n                    <button className=\"organisation-btn next-btn addMore-share-btn addMore-fundTransfer-btn\"\n                        onClick={addMoreShares} disabled={insufititentBalance} >Add More</button>\n                    <button className=\"fundtransfer-btn\" onClick={() => transfer(props.openFundModalDtls.index)} disabled={insufititentBalance}>{props.openFundModalDtls.btn}</button>\n                </Modal.Body>\n            </Modal>\n        </>\n    );\n}\n\nexport default withRouter(TransactionFund);"]},"metadata":{},"sourceType":"module"}